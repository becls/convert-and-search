\documentclass[letterpaper,11pt,twoside,final]{article}
\usepackage{sagian}

\begin{document}

\title{Database Searcher and Log File Converter Design}
\author{Alyssa Crawford}
\date{July 25, 2018}
\coverpage

\section*{Introduction}
The database searcher and log file converter is a stand-alone
application built to facilitate easy retrieval of information from instrument
log files, both sqlite database files and .log files. In the case of
database files, the application allows the user to preform basic
searches through a GUI, or to enter SQL statements. These searches can
then be saved for future use. The user can easily switch between saved
databases. The application can
also convert textual log files into an easier to search database.
It was built specifically with the
needs of tech support in mind, however other parties may also find it
useful.

This application uses the Swish Concurrency Engine (\url{https://github.com/becls/swish}) to interface with
the databases, run the conversions, and to display the
results. Electron (\url{https://electronjs.org/}) is used create a framework for displaying the pages generated by Swish.  

\section*{Theory of Operation}
\subsection*{Overall Setup}
The application runs like it is a local webpage running on port 54321.
It uses the web server provided by swish in order to
create the webpages. Electron is then used to display these webpages as a native
desktop application. These pages are displayed as a desktop
application for two main reasons:
\begin{enumerate}
  \item Each user needs a separate list of saved searches and
    databases. Though this could have been achieved through user
    accounts, that would decrease usability as the user would have to
    remember their login information, potentially with long gaps between
    uses.
  \item Uploading the entire database file to the server would be detrimental to server performance as many of the databases
    are several thousand megabytes. A desktop application has the
    advantage that the file can remain stored on the user's computer and
    the application only has to store the path to the file.
\end{enumerate}
Electron is also helpful because it provides utilities for packaging
the application into an easy to run program. When the program is ran, it starts Swish in the
background so that the desired pages are available. When the
application is closed Swish is also closed.

\subsection*{Information Storage and Database Access}
At any given time, the application is referencing two databases: the
user selected database and the Swish log file. The user selected
database is used by the two types of searches and is never edited.

The Swish log file is modified during initial setup in order to facilitate storing
databases and searches. The setup process adds two tables,
one for databases and one for searches. Activities that reference saved searches or
databases reference these tables. Unlike the user referenced database,
the Swish log file can be edited, such as when the user saves a
search.

\subsection*{Converter}
The log file converter is designed to convert specifc log files into a database. The database format makes it easy to search
multiple log files at the same time, and reduces redundant
information. Some important information about the expected formats:
\begin{itemize}
  \item The converter only converts files in the current
directory. Subdirectories are ignored. This decision was made to
increase converter speed and because these folders usually
do not have subdirectories. 
  \item The name of each file to convert must follow the following pattern
    \textbf{<name>dd-mm-yyyy HH.MM.SS.log}, where \textbf{<name>} can be
    anything that does not include two numbers in a row and will
    become the name of a table in the database.
    This constraint allows the converter to determine which files to
    convert, as most files that violate this convention also have a
    different internal structure and require very different
    processing. Files that violate this convention are ignored.
  \item There are two types of tables created, data tables and header
    tables. There is only one header table created. Each file adds one
    entry to the header table that describes the information found at
    the top of the header file. Data tables contain the information
    found in the main body of the log file. There are as many data
    tables created as there are unique convertable file names, ie one
    table is created for each unique value of \textbf{<name>} as
    described above.
    \item
    Each data table created has four columns, Run number, method, dateTime, and
    desc. Run number is automatically generated and references the
    corresponding entry in the Header table. This allows the
    repetitive header information to be hidden, but provides the user
    a way to determine that information. The remaining three columns
    are explained below.
  \item The converter expects the header of a given file to include
    the following line \textbf{Method = <Method name>}, where
    \textbf{<Method name>} does not contain any newline characters. \textbf{<Method name>} is
    saved as the value of the method for each row generated by that
    file. If the pattern \textbf{Method = <Method name>} does not
    appear in the file header, the value of method will be blank for
    all entries generated by that file.
  \item Excluding the header, the converter expects the contents of
    the file to follow the following format: \textbackslash n\textbf{mm/dd/yyyy HH:MM:SS,<Desc>}, where \textbf{<Desc>} can
    contain anything other than a newline followed by a date. Each
    occurrence of this pattern becomes an entry in the corresponding
    table. The \textbf{mm/dd/yyyy HH:MM:SS} section becomes the dateTime, and
    the \textbf{<Desc>} becomes the desc.
\end{itemize}


\end{document}
